<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Bee ERP: src/newtonERP/orm/Orm.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>src/newtonERP/orm/Orm.java</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="keyword">package </span>newtonERP.orm;
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="keyword">import</span> java.sql.ResultSet;
<a name="l00004"></a>00004 <span class="keyword">import</span> java.util.Vector;
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="keyword">import</span> newtonERP.module.AbstractOrmEntity;
<a name="l00007"></a>00007 <span class="keyword">import</span> newtonERP.orm.exceptions.OrmException;
<a name="l00008"></a>00008 <span class="keyword">import</span> newtonERP.orm.field.Field;
<a name="l00009"></a>00009 <span class="keyword">import</span> newtonERP.orm.sgbd.AbstractSgbd;
<a name="l00010"></a>00010 <span class="keyword">import</span> newtonERP.taskManager.TaskManager;
<a name="l00011"></a>00011 
<a name="l00025"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html">00025</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html" title="Basic class for the orm.">Orm</a>
<a name="l00026"></a>00026 {
<a name="l00027"></a>00027 
<a name="l00028"></a>00028         <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html">AbstractSgbd</a> getSgbd()
<a name="l00029"></a>00029         {
<a name="l00030"></a>00030                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1OrmFonction.html">OrmFonction</a>.getSgbd();
<a name="l00031"></a>00031         }
<a name="l00032"></a>00032 
<a name="l00040"></a>00040         @Deprecated
<a name="l00041"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a6d4e470e0a7dfcec6822182567b2a37a">00041</a>         <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a6d4e470e0a7dfcec6822182567b2a37a">getOrCreateEntity</a>(
<a name="l00042"></a>00042                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityAsType, String fieldName, String fieldValue)
<a name="l00043"></a>00043         {
<a name="l00044"></a>00044                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractEntity.html#af47e42b154414c6afaa3253cc4adaf6b">setData</a>(fieldName, fieldValue);
<a name="l00045"></a>00045 
<a name="l00046"></a>00046                 Vector&lt;AbstractOrmEntity&gt; entityList = entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html#af1876f416ab5b4b4235229da3ac0fde0" title="trouve l&amp;#39;entity selon les critere disponible, retourne le premier trouve">get</a>();
<a name="l00047"></a>00047 
<a name="l00048"></a>00048                 <span class="keywordflow">if</span> (entityList.size() &gt; 0)
<a name="l00049"></a>00049                 {
<a name="l00050"></a>00050                         <span class="keywordflow">return</span> entityList.get(0);
<a name="l00051"></a>00051                 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html#abc63817c57d950d59d812dcffed8831a" title="enregistre l&amp;#39;entity en DB">newE</a>();
<a name="l00054"></a>00054                 <span class="keywordflow">return</span> entityAsType;
<a name="l00055"></a>00055         }
<a name="l00056"></a>00056 
<a name="l00065"></a>00065         @Deprecated
<a name="l00066"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a618a1f92c130623a95a9efd0e53489d9">00066</a>         <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a6d4e470e0a7dfcec6822182567b2a37a">getOrCreateEntity</a>(
<a name="l00067"></a>00067                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityAsType, String fieldName1,
<a name="l00068"></a>00068                         String fieldValue1, String fieldName2, String fieldValue2)
<a name="l00069"></a>00069         {
<a name="l00070"></a>00070                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractEntity.html#af47e42b154414c6afaa3253cc4adaf6b">setData</a>(fieldName1, fieldValue1);
<a name="l00071"></a>00071                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractEntity.html#af47e42b154414c6afaa3253cc4adaf6b">setData</a>(fieldName2, fieldValue2);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073                 Vector&lt;AbstractOrmEntity&gt; entityList = entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html#af1876f416ab5b4b4235229da3ac0fde0" title="trouve l&amp;#39;entity selon les critere disponible, retourne le premier trouve">get</a>();
<a name="l00074"></a>00074 
<a name="l00075"></a>00075                 <span class="keywordflow">if</span> (entityList.size() &gt; 0)
<a name="l00076"></a>00076                 {
<a name="l00077"></a>00077                         <span class="keywordflow">return</span> entityList.get(0);
<a name="l00078"></a>00078                 }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html#abc63817c57d950d59d812dcffed8831a" title="enregistre l&amp;#39;entity en DB">newE</a>();
<a name="l00081"></a>00081                 <span class="keywordflow">return</span> entityAsType;
<a name="l00082"></a>00082         }
<a name="l00083"></a>00083 
<a name="l00092"></a>00092         @Deprecated
<a name="l00093"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a3d5c60277c580fad81fbccb03dd359db">00093</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">delete</span>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityAsType,
<a name="l00094"></a>00094                         String fieldName1, String fieldValue1, String fieldName2,
<a name="l00095"></a>00095                         String fieldValue2)
<a name="l00096"></a>00096         {
<a name="l00097"></a>00097                 entityAsType.<a class="code" href="classnewtonERP_1_1module_1_1AbstractEntity.html#af47e42b154414c6afaa3253cc4adaf6b">setData</a>(fieldName1, fieldValue1);
<a name="l00098"></a>00098                 entityAsType.setData(fieldName2, fieldValue2);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100                 Vector&lt;AbstractOrmEntity&gt; entityList = entityAsType.get();
<a name="l00101"></a>00101 
<a name="l00102"></a>00102                 <span class="keywordflow">if</span> (entityList.size() &gt; 0)
<a name="l00103"></a>00103                 {
<a name="l00104"></a>00104                         entityList.get(0).delete();
<a name="l00105"></a>00105                 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108 
<a name="l00117"></a>00117         @Deprecated
<a name="l00118"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">00118</a>         <span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;AbstractOrmEntity&gt; <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(
<a name="l00119"></a>00119                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity, Vector&lt;String&gt; searchParameters,
<a name="l00120"></a>00120                         <span class="keywordtype">int</span> limit, <span class="keywordtype">int</span> offset, String orderBy)
<a name="l00121"></a>00121         {
<a name="l00122"></a>00122                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1EntityCreator.html" title="Class used to create the entities in the select statement of the orm because it&amp;#39;s not the orm&amp;#39...">EntityCreator</a>.createEntitiesFromResultSet(
<a name="l00123"></a>00123                                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntity, searchParameters, limit, offset,
<a name="l00124"></a>00124                                                 orderBy), searchEntity);
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126 
<a name="l00131"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a8b6578e305afb8f03633694e69d057b4">00131</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a8b6578e305afb8f03633694e69d057b4">isEntityExists</a>(String entitySystemName)
<a name="l00132"></a>00132         {
<a name="l00133"></a>00133                 <span class="keywordflow">return</span> getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a8bb26b41f0640c9ba99da5c7bf06a579">isEntityExists</a>(entitySystemName);
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135 
<a name="l00143"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9c5771285ac1f6e037d9cc36cc4594fa">00143</a>         <span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;AbstractOrmEntity&gt; <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(
<a name="l00144"></a>00144                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity,
<a name="l00145"></a>00145                         Vector&lt;String&gt; searchCriteriasParam, <span class="keywordtype">int</span> limit, <span class="keywordtype">int</span> offset)
<a name="l00146"></a>00146         {
<a name="l00147"></a>00147                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntity, searchCriteriasParam, limit, offset, null);
<a name="l00148"></a>00148         }
<a name="l00149"></a>00149 
<a name="l00154"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9d33d32a125f05c20c576b7cb6ff2c31">00154</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9d33d32a125f05c20c576b7cb6ff2c31">count</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity)
<a name="l00155"></a>00155         {
<a name="l00156"></a>00156                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9d33d32a125f05c20c576b7cb6ff2c31">count</a>(searchEntity, null);
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158 
<a name="l00164"></a>00164         @Deprecated
<a name="l00165"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5c2025fd5e3a846801da1fc80a646cf2">00165</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9d33d32a125f05c20c576b7cb6ff2c31">count</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity,
<a name="l00166"></a>00166                         Vector&lt;String&gt; searchParameterList)
<a name="l00167"></a>00167         {
<a name="l00168"></a>00168                 <span class="keywordflow">return</span> getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a1068fc7b4e8c4952e02ffbcbef76edf0">count</a>(searchEntity, searchParameterList);
<a name="l00169"></a>00169         }
<a name="l00170"></a>00170 
<a name="l00177"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a54deb2350849c19d5d95d2a82f36ba40">00177</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a54deb2350849c19d5d95d2a82f36ba40" title="Sert à ajouter un index dans la table SQL de l&amp;#39;entité pour un field en particulier.">createIndex</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entity, Field&lt;?&gt; field)
<a name="l00178"></a>00178         {
<a name="l00179"></a>00179                 <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a54deb2350849c19d5d95d2a82f36ba40" title="Sert à ajouter un index dans la table SQL de l&amp;#39;entité pour un field en particulier.">createIndex</a>(entity.<a class="code" href="classnewtonERP_1_1module_1_1AbstractEntity.html#ad26f590c74d49b7c494d62de6ad1563b">getSystemName</a>(), field.getSystemName());
<a name="l00180"></a>00180         }
<a name="l00181"></a>00181 
<a name="l00188"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#ad93a4cb8ba855ae7ceffafb9b272f291">00188</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a54deb2350849c19d5d95d2a82f36ba40" title="Sert à ajouter un index dans la table SQL de l&amp;#39;entité pour un field en particulier.">createIndex</a>(String entityName, String fieldName)
<a name="l00189"></a>00189         {
<a name="l00190"></a>00190                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#ab7c38f7b063fd6bc6dd51308738b5b64" title="Sert à ajouter un index dans la table SQL de l&amp;#39;entité pour un field en particulier.">createIndex</a>(entityName, fieldName);
<a name="l00191"></a>00191         }
<a name="l00192"></a>00192 
<a name="l00196"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a3d8ac2912cd9245e03903ac088917837">00196</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a3d8ac2912cd9245e03903ac088917837" title="Used to initialize the connection.">connect</a>()
<a name="l00197"></a>00197         {
<a name="l00198"></a>00198                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a05c95afeec1ef4eac71ebfe44dc1a2e7" title="Method used to initialize the connection to the databse.">connect</a>();
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200 
<a name="l00204"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a1a57fa49705c5f8300dfd240c135049b">00204</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a1a57fa49705c5f8300dfd240c135049b" title="Used to disconnect from the db.">disconnect</a>()
<a name="l00205"></a>00205         {
<a name="l00206"></a>00206                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#ae6d1a34955842c3464c95dea015cef61" title="Method used to disconnect from the database.">disconnect</a>();
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208 
<a name="l00214"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a4b80843fcb1bc17f6d452cd5a0c078e4">00214</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a4b80843fcb1bc17f6d452cd5a0c078e4" title="To execute a custom query.">executeCustomQuery</a>(String sqlQuery)
<a name="l00215"></a>00215         {
<a name="l00216"></a>00216                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a44fd8ea409e56d965618f17f63ee09ab" title="Method that executes the sql query passed in paramter plus de action from the OrmAction.">execute</a>(sqlQuery, OrmActions.OTHER);
<a name="l00217"></a>00217         }
<a name="l00218"></a>00218 
<a name="l00231"></a>00231         @Deprecated
<a name="l00232"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5135aad15e7aee05d0a9c151f9cefdfa">00232</a>         <span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;AbstractOrmEntity&gt; <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(
<a name="l00233"></a>00233                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity, Vector&lt;String&gt; searchCriteriasParam)
<a name="l00234"></a>00234         {
<a name="l00235"></a>00235                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1EntityCreator.html" title="Class used to create the entities in the select statement of the orm because it&amp;#39;s not the orm&amp;#39...">EntityCreator</a>.createEntitiesFromResultSet(
<a name="l00236"></a>00236                                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntity, searchCriteriasParam),
<a name="l00237"></a>00237                                 searchEntity);
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239 
<a name="l00250"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#aeb3174b21fbc8fe39f97ebbe9af52cbe">00250</a>         <span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;AbstractOrmEntity&gt; <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(
<a name="l00251"></a>00251                         Vector&lt;AbstractOrmEntity&gt; searchEntities)
<a name="l00252"></a>00252         {
<a name="l00253"></a>00253                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1EntityCreator.html" title="Class used to create the entities in the select statement of the orm because it&amp;#39;s not the orm&amp;#39...">EntityCreator</a>.createEntitiesFromResultSet(
<a name="l00254"></a>00254                                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntities), searchEntities.get(0));
<a name="l00255"></a>00255         }
<a name="l00256"></a>00256 
<a name="l00261"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a3eb516a3a778f5b0c18006e0ff49a936">00261</a>         <span class="keyword">public</span> <span class="keyword">static</span> Vector&lt;AbstractOrmEntity&gt; <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(
<a name="l00262"></a>00262                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity)
<a name="l00263"></a>00263         {
<a name="l00264"></a>00264                 Vector&lt;AbstractOrmEntity&gt; searchEntities = <span class="keyword">new</span> Vector&lt;AbstractOrmEntity&gt;();
<a name="l00265"></a>00265                 searchEntities.add(searchEntity);
<a name="l00266"></a>00266                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntities);
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268 
<a name="l00276"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a39029bd927e134801f1e8b244ccbaab1">00276</a>         <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a39029bd927e134801f1e8b244ccbaab1" title="Select.">selectUnique</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity)
<a name="l00277"></a>00277         {
<a name="l00278"></a>00278                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntity).get(0);
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280 
<a name="l00288"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#ada3528e050ccf7a75e9eef49af97ddd6">00288</a>         <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a39029bd927e134801f1e8b244ccbaab1" title="Select.">selectUnique</a>(
<a name="l00289"></a>00289                         Vector&lt;AbstractOrmEntity&gt; searchEntities)
<a name="l00290"></a>00290         {
<a name="l00291"></a>00291                 <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(searchEntities).get(0);
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293 
<a name="l00301"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a09639019a2777a758d6756f844134687">00301</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a09639019a2777a758d6756f844134687" title="Method used to insert an entity in the databse based into the entity passed in parameter.">insert</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> newEntity)
<a name="l00302"></a>00302         {
<a name="l00303"></a>00303                 <span class="keywordtype">int</span> primaryKeyValue = getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#abe3832d05b3dc02020af5b1abc5139b2" title="Method used to insert an entity in the database based into the entity passed in parameter.">insert</a>(newEntity);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305                 <span class="comment">// todo: pourquoi le task manager est apellé ici??</span>
<a name="l00306"></a>00306                 <span class="keywordflow">if</span> (primaryKeyValue != 0)
<a name="l00307"></a>00307                         <a class="code" href="classnewtonERP_1_1taskManager_1_1TaskManager.html" title="Gestionnaire de tâches (effectue les tâches automatisées).">TaskManager</a>.executeTasks(newEntity, primaryKeyValue);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309                 <span class="keywordflow">return</span> primaryKeyValue;
<a name="l00310"></a>00310         }
<a name="l00311"></a>00311 
<a name="l00318"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a82d9c8e2c2fd58007ec692d45a6b66ac">00318</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a82d9c8e2c2fd58007ec692d45a6b66ac" title="Insert an entity if no entity matches current field.">insertUnique</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> newUniqueEntity)
<a name="l00319"></a>00319         {
<a name="l00320"></a>00320                 <span class="comment">// todo: devrait alle dans OrmFonction</span>
<a name="l00321"></a>00321                 Vector&lt;AbstractOrmEntity&gt; entity = <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a5e20d5855932f6804c3891d5189420ee">select</a>(newUniqueEntity);
<a name="l00322"></a>00322                 <span class="keywordflow">if</span> (entity.size() &lt; 1)
<a name="l00323"></a>00323                         <span class="keywordflow">return</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a09639019a2777a758d6756f844134687" title="Method used to insert an entity in the databse based into the entity passed in parameter.">insert</a>(newUniqueEntity);
<a name="l00324"></a>00324                 <span class="keywordflow">if</span> (entity.size() == 1)
<a name="l00325"></a>00325                 {
<a name="l00326"></a>00326                         <span class="keywordflow">return</span> entity.get(0).getPrimaryKeyValue();
<a name="l00327"></a>00327                 }
<a name="l00328"></a>00328                 <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classnewtonERP_1_1orm_1_1exceptions_1_1OrmException.html" title="OrmException super class for all the other classes.">OrmException</a>(<span class="stringliteral">&quot;too many entity cannot give ID&quot;</span>);
<a name="l00329"></a>00329         }
<a name="l00330"></a>00330 
<a name="l00337"></a>00337         @Deprecated
<a name="l00338"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a4c593803eb54973dadb0af174c89058f">00338</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">delete</span>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity,
<a name="l00339"></a>00339                         Vector&lt;String&gt; searchCriterias)
<a name="l00340"></a>00340         {
<a name="l00341"></a>00341                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a5edbedb6bc8e5ec5849cb987496c2d00" title="Method used to delete an entity from the database.">delete</a>(searchEntity, searchCriterias);
<a name="l00342"></a>00342         }
<a name="l00343"></a>00343 
<a name="l00352"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a0f45957fb7aaf62f5d9b987e317bf765">00352</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">delete</span>(Vector&lt;AbstractOrmEntity&gt; searchEntities)
<a name="l00353"></a>00353         {
<a name="l00354"></a>00354                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a5edbedb6bc8e5ec5849cb987496c2d00" title="Method used to delete an entity from the database.">delete</a>(searchEntities);
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356 
<a name="l00364"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a09ff090024f2cb5048f1b35e2c09a4db">00364</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <span class="keyword">delete</span>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity)
<a name="l00365"></a>00365         {
<a name="l00366"></a>00366                 Vector&lt;AbstractOrmEntity&gt; searchEntities = <span class="keyword">new</span> Vector&lt;AbstractOrmEntity&gt;();
<a name="l00367"></a>00367                 searchEntities.add(searchEntity);
<a name="l00368"></a>00368                 <span class="keyword">delete</span>(searchEntities);
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370 
<a name="l00378"></a>00378         @Deprecated
<a name="l00379"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9708044924b0f49eea4dc5ab7aff25b0">00379</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9708044924b0f49eea4dc5ab7aff25b0" title="Method used to update / change an entity.">update</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityContainingChanges,
<a name="l00380"></a>00380                         Vector&lt;String&gt; searchCriterias)
<a name="l00381"></a>00381         {
<a name="l00382"></a>00382                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a14d4afad76e04a602f6e985836469550" title="Method used to update / change an entity.">update</a>(entityContainingChanges, searchCriterias);
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384 
<a name="l00394"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a6a003adf47c24b7b91db279afedb2272">00394</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a9708044924b0f49eea4dc5ab7aff25b0" title="Method used to update / change an entity.">update</a>(Vector&lt;AbstractOrmEntity&gt; searchEntities,
<a name="l00395"></a>00395                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityContainingChanges)
<a name="l00396"></a>00396         {
<a name="l00397"></a>00397                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a14d4afad76e04a602f6e985836469550" title="Method used to update / change an entity.">update</a>(searchEntities, entityContainingChanges);
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399 
<a name="l00409"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a8dc87967f8ae79dddd4275bcfb34c69b">00409</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a8dc87967f8ae79dddd4275bcfb34c69b" title="Uses the new where builder.">updateUnique</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> searchEntity,
<a name="l00410"></a>00410                         <a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entityContainingChanges)
<a name="l00411"></a>00411         {
<a name="l00412"></a>00412                 getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a71de626ac8be7f3b642332e103568f46" title="Uses the new where builder.">updateUnique</a>(searchEntity, entityContainingChanges);
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414 
<a name="l00422"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#aa4e93a939f55a61e5b33cc7c892996f2">00422</a>         <span class="keyword">public</span> <span class="keyword">static</span> ResultSet <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#aa4e93a939f55a61e5b33cc7c892996f2" title="Alter table.">addColumnToTable</a>(<a class="code" href="classnewtonERP_1_1module_1_1AbstractOrmEntity.html">AbstractOrmEntity</a> entity,
<a name="l00423"></a>00423                         Field&lt;?&gt; field)
<a name="l00424"></a>00424         {
<a name="l00425"></a>00425                 <span class="keywordflow">return</span> getSgbd().<a class="code" href="classnewtonERP_1_1orm_1_1sgbd_1_1AbstractSgbd.html#a9ac4f27491a92e0026b39b15ca4b8db7" title="Alter table.">addColumnToTable</a>(entity, field);
<a name="l00426"></a>00426         }
<a name="l00427"></a>00427 
<a name="l00431"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a2141a9573a7661dc172dab969294f38d">00431</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a2141a9573a7661dc172dab969294f38d" title="Creates the non-existent table from the modules in the database.">createNonExistentTables</a>()
<a name="l00432"></a>00432         {
<a name="l00433"></a>00433                 <a class="code" href="classnewtonERP_1_1orm_1_1OrmFonction.html">OrmFonction</a>.createNonExistentTables();
<a name="l00434"></a>00434         }
<a name="l00435"></a>00435 
<a name="l00439"></a>00439         @Deprecated
<a name="l00440"></a>00440         <span class="comment">// cette fonction ne devrai plus etre apellé a l&#39;extérieur de l&#39;ORM</span>
<a name="l00441"></a><a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a7e5f108150e2199e092ed3100c6de3d5">00441</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classnewtonERP_1_1orm_1_1Orm.html#a7e5f108150e2199e092ed3100c6de3d5" title="Fait un backup de la DB si l&amp;#39;intervale de temps est assez grande.">doBackupIfTimeIntervalAllows</a>()
<a name="l00442"></a>00442         {
<a name="l00443"></a>00443                 <a class="code" href="classnewtonERP_1_1orm_1_1OrmFonction.html">OrmFonction</a>.doBackupIfTimeIntervalAllows();
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445 }
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Sep 27 2010 00:09:31 for Bee ERP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
